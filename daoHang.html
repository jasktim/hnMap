<!--<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>校园导航</title>
  <script src="https://map.qq.com/api/js?v=2.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"></script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%;"></div>

<script>
  // 初始化地图
  var map = new qq.maps.Map(document.getElementById("container"), {
    center: new qq.maps.LatLng(28.196209,112.867602), // 设置地图的中心点坐标
    zoom: 18 // 设置地图的缩放级别
  });
  // 初始化地图
  // 获取地理位置
  // 添加跟随导航功能
  // 监听地图移动事件，实时更新路径

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var latLng = new qq.maps.LatLng(position.coords.latitude, position.coords.longitude);
      map.setCenter(latLng);
    }, function() {
      alert("定位失败，请检查浏览器是否支持地理定位功能。");
    });
  } else {
    alert("浏览器不支持地理定位功能。");
  }

  // 添加跟随导航功能
  var polyline = new qq.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 2,
    map: map
  });

  // 监听地图移动事件，实时更新路径
  qq.maps.event.addListener(map, 'moveend', function() {
    var center = map.getCenter();
    polyline.getPath().push(center);
  });

</script>
</body>
</html>-->



<!DOCTYPE html>
<html>
<head>
  <title>Tencent Map API Example</title>
  <meta charset="utf-8">
  <style>
    #map {
      width: 100%;
      height: 400px;
    }
  </style>
</head>
<body>
<div id="map"></div>
<button id="getLocationBtn">获取地理位置</button>
<button id="startNavigationBtn">开始导航</button>

<script src="https://map.qq.com/api/js?v=2.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"></script>
<script>
  // 初始化地图
  var map = new qq.maps.Map(document.getElementById("map"), {
    center: new qq.maps.LatLng(39.916527, 116.397128), // 设置地图中心点
    zoom: 18, // 设置地图缩放级别
  });

  // 获取地理位置
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      alert("Geolocation is not supported by this browser.");
    }
  }

  function showPosition(position) {
    var latLng = new qq.maps.LatLng(position.coords.latitude, position.coords.longitude);
    map.setCenter(latLng); // 将地图中心点设置为当前位置
  }
  // 添加跟随导航功能

    // 实现跟随导航功能的代码
  var polyline= new qq.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 2,
    map: map
  });

  // 监听地图移动事件，实时更新路径
  qq.maps.event.addListener(map, 'dragend', function() {
    // 实时更新路径的代码
    var center = map.getCenter();
    polyline.getPath().push(center);
  });

  // 这里假设你有一个按钮来触发获取位置和导航功能
  document.getElementById("getLocationBtn").addEventListener("click", getLocation);
  // document.getElementById("startNavigationBtn").addEventListener("click", startNavigation);
</script>
</body>
</html>
